import{k,o as l,b as a,F as m,r as b,d as e,u as U,g as C,t as g,w as _,v as p,y as A,p as F,f as E}from"./index-e83da1a6.js";import{e as L}from"./exportWord-29890d81.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const d=r=>(F("data-v-0a2e388c"),r=r(),E(),r),R={class:"container"},z=["onClick"],B={class:"work"},N=["src"],G={key:0,class:"picture_icon"},T=d(()=>e("span",null,[e("i",{class:"bx bx-trash"})],-1)),W=["onClick"],O=d(()=>e("i",{class:"bx bx-zoom-in"},null,-1)),P=[O],q={key:1},H=d(()=>e("br",null,null,-1)),J=["data-id"],K={class:"describe_area"},Q=d(()=>e("label",null,"日期：",-1)),X=["onUpdate:modelValue"],Y=d(()=>e("label",null,"主題：",-1)),Z=["onUpdate:modelValue"],ee=d(()=>e("label",null,"說明：",-1)),te=["onUpdate:modelValue"],ne={class:"design_area"},oe={key:0},se={key:1},le=["onUpdate:modelValue"],ae={class:"design_area"},ce={key:0},ie={key:1},de=["onUpdate:modelValue"],ue=["onClick"],_e=["onClick"],pe={class:"add_area"},re=d(()=>e("i",{class:"bx bx-plus-circle"},null,-1)),he=[re],ge=["onClick"],ve=d(()=>e("i",{class:"bx bx-trash"},null,-1)),ye=[ve],ke=d(()=>e("i",{class:"bx bx-pencil"},null,-1)),me=[ke],be={__name:"index",setup(r){const v=L(),y=k([]),f=k(null),c=k([{title:"圖1",content:{name:"貴陽大樓新建工程",date:"112. 11. 07.",main:"防水工程",direction:"2F防水層施作試水自檢(204)",design:["設計：","滿水試驗"," "],actually:["實際：","開始時間:14:30","水位高度:3.6CM"]},picture:{}}]),x=()=>{let n={title:`圖${c.value.length+1}`,content:{name:"貴陽大樓新建工程",date:"112. 11. 07.",main:"防水工程",direction:"2F防水層施作試水自檢(204)",design:["設計：","滿水試驗"," "],actually:["實際：","開始時間:14:30","水位高度:3.6CM"]},picture:{}};c.value.push(n)},w=n=>{c.value.splice(n,1),c.value.forEach((o,t)=>o.title=`圖${t+1}`)},I=()=>{console.log(c.value),v.GetData(c.value)},V=n=>{c.value[n].content.design.push(" "),c.value[n].content.actually.push("")},D=(n,o)=>{n.design.splice(o,1),n.actually.splice(o,1)},j=n=>{c.value[n].picture.Url||(f.value=n,console.log(y.value,n),y.value[n].click())},$=n=>{const o=n[0];if(console.log(o),o.type==="image/jpeg"||o.type==="image/png"){const t=new FileReader;t.readAsDataURL(o),t.onload=()=>{let u={name:o.name,type:o.type,size:o.size,Date:o.lastModifiedDate,Url:t.result};console.log(u),c.value[f.value].picture=u}}else alert("不支援的檔案格式！上傳僅支援.jpg, .jpeg, .png圖檔")},S=async n=>{n.includes("http")||(n=URL.createObjectURL(await(await fetch(n)).blob())),window.open(n)};return(n,o)=>(l(),a("div",R,[(l(!0),a(m,null,b(c.value,(t,u)=>(l(),a("div",{class:"record_item",key:u},[e("div",{class:"picture_area",onClick:s=>j(u)},[e("div",B,[e("img",{src:t.picture.Url},null,8,N),t.picture.Url?(l(),a("div",G,[T,e("span",{onClick:s=>S(t.picture.Url)},P,8,W)])):(l(),a("span",q,[C("點擊or拖曳上傳"),H,C("僅支援.jpg, .jpeg, .png圖檔")])),e("input",{"data-id":u,type:"file",ref_for:!0,ref_key:"inputImage",ref:y,accept:".jpg, .jpeg, .png",multiple:"",onChange:o[0]||(o[0]=s=>$(s.target.files))},null,40,J)])],8,z),e("div",K,[e("span",null,g(t.title),1),e("span",null,"檔名："+g(t.content.name),1),e("span",null,[Q,_(e("input",{type:"text","onUpdate:modelValue":s=>t.content.date=s},null,8,X),[[p,t.content.date]])]),e("span",null,[Y,_(e("input",{type:"text","onUpdate:modelValue":s=>t.content.main=s},null,8,Z),[[p,t.content.main]])]),e("span",null,[ee,_(e("input",{type:"text","onUpdate:modelValue":s=>t.content.direction=s},null,8,te),[[p,t.content.direction]])])]),e("div",ne,[(l(!0),a(m,null,b(t.content.design,(s,i)=>(l(),a("div",{key:i},[i==0?(l(),a("span",oe,g(s),1)):(l(),a("span",se,[_(e("input",{type:"text","onUpdate:modelValue":h=>t.content.design[i]=h},null,8,le),[[p,t.content.design[i]]])]))]))),128))]),e("div",ae,[(l(!0),a(m,null,b(t.content.actually,(s,i)=>(l(),a("div",{key:i},[i==0?(l(),a("span",ce,g(s),1)):(l(),a("span",ie,[_(e("input",{type:"text","onUpdate:modelValue":h=>t.content.actually[i]=h},null,8,de),[[p,t.content.actually[i]]]),e("i",{class:"bx bx-minus-circle",onClick:h=>D(t.content,i)},null,8,ue)]))]))),128)),e("button",{onClick:s=>V(u)},"新增欄位",8,_e)]),e("div",pe,[e("span",{onClick:x},he),_(e("span",{onClick:s=>w(u)},ye,8,ge),[[A,c.value.length>1]]),e("span",{onClick:I},me)])]))),128)),e("button",{onClick:o[1]||(o[1]=(...t)=>U(v).generate&&U(v).generate(...t))},"Generate Document")]))}},xe=M(be,[["__scopeId","data-v-0a2e388c"]]);export{xe as default};
